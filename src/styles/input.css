/* Tailwind v4 entry */
@import "tailwindcss";

/* Consolidated authoritative entry: tokens, base defaults, utilities & animations. */

/* Fallback tokens (overridden by @theme extraction when supported) */
:root {
        --color-brand-accent: oklch(68.47% 0.1479 237.32);
        --color-brand-accent-accessible: oklch(50.00% 0.1193 242.75); /* darker variant for text on white (sky-700) */
        --color-brand-navy: oklch(30.69% 0.0868 255.80);
        --color-bg-base: oklch(100% 0 0);
        --color-fg-base: oklch(27.95% 0.0368 260.03); /* slate-800 */
        --color-bg-base-dark: oklch(20.77% 0.0398 265.75); /* slate-900 */
        --color-fg-base-dark: oklch(86.90% 0.0198 252.89); /* slate-300 */
	--radius-pill: 9999px;
	--ease-swoop: cubic-bezier(.4,0,.2,1);
        --color-link-accent: oklch(58.76% 0.1389 241.97); /* sky-600 */
        --color-link-accent-alt: oklch(75.35% 0.1390 232.66); /* sky-400 */
	--color-card-border: rgba(226,232,240,0.7); /* slate-200 */
	--color-card-border-dark: rgba(51,65,85,0.5); /* slate-600-ish */
	--shadow-card-hover: 0 4px 12px -2px rgb(0 0 0 / 0.15);
	--radius-card: 0.75rem;
	--space-card: 1rem;
	--motion-duration-fast:200ms;
	--motion-duration-medium:400ms;
	--motion-duration-slow:800ms;
	--motion-ease-standard:cubic-bezier(.4,0,.2,1);
	--motion-ease-emphasized:cubic-bezier(.22,1,.36,1);
}

/* Project tokens & global defaults */
@layer base {
	:root {
		color-scheme: light dark;
		/* Prefer Tailwind theme() values when available (falls back to plain vars defined above). */
		--brand-accent: theme(colors.fresh-sky, var(--color-brand-accent));
		--brand-accent-text: var(--color-brand-accent-accessible);
		--brand-navy: theme(colors.deep-navy, var(--color-brand-navy));
	}
	html, body {
		min-height: 100%;
		background-color: var(--color-bg-base);
		color: var(--color-fg-base);
		font-family: Poppins, sans-serif;
		text-rendering: optimizeLegibility;
		-webkit-font-smoothing: antialiased;
	}
	.dark html, .dark body {
		background-color: var(--color-bg-base-dark);
		color: var(--color-fg-base-dark);
	}
        ::selection {
                background: var(--brand-accent);
                color: oklch(100% 0 0);
        }
		a {
			text-decoration: underline;
			text-underline-offset: 0.25em;
			transition: color .2s var(--ease-swoop), text-decoration-color .2s var(--ease-swoop);
			color: var(--brand-accent-text);
			text-decoration-color: color-mix(in srgb,var(--brand-accent-text) 35%, transparent);
		}
		.dark a { color: var(--brand-accent); text-decoration-color: color-mix(in srgb,var(--brand-accent) 40%, transparent); }
		a:hover { text-decoration-color: var(--brand-accent-text); }
		.dark a:hover { text-decoration-color: var(--brand-accent); }
	:focus-visible {
		outline: 2px solid var(--brand-accent);
		outline-offset: 2px;
	}
}

/* Animations (shared) */
@keyframes float { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-6px) } }
@keyframes float-medium { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-10px) } }
@keyframes float-fast { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-14px) } }
@keyframes fade-in-up { 0% { opacity:0; transform: translateY(8px) } 100% { opacity:1; transform: translateY(0) } }

@layer utilities {
	.bg-brand   { background-color: var(--brand-accent); }
	.text-brand { color: var(--brand-accent); }
	.focus-ring-brand:focus-visible { box-shadow: 0 0 0 4px color-mix(in srgb,var(--brand-accent) 55%, transparent); }
	/* Generic focus utility */
	.focus-ring:focus-visible { outline: 2px solid var(--brand-accent); outline-offset: 2px; }
	/* Screen-reader only but focusable when tabbed */
	.sr-only-focusable:not(:focus):not(:active) { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
	.sr-only-focusable:focus-visible { position:static; width:auto; height:auto; margin:0; overflow:visible; clip:auto; white-space:normal; }
	/* Container query utilities */
	@container (min-width: 48rem) {
		.cq-grid-3 { grid-template-columns: repeat(3, minmax(0,1fr)); }
		.cq-grid-4 { grid-template-columns: repeat(4, minmax(0,1fr)); }
	}
	/* Animation utilities */
	.animate-float-slow { animation: float 6s ease-in-out infinite; }
	.animate-float-medium { animation: float-medium 8s ease-in-out infinite; }
	.animate-float-fast { animation: float-fast 12s ease-in-out infinite; }
	.animate-fade-in-up { animation: fade-in-up .6s var(--motion-ease-emphasized) both; }
	/* Animation delay utilities */
	.anim-delay-100 { animation-delay: .1s; }
	.anim-delay-200 { animation-delay: .2s; }
	.anim-delay-300 { animation-delay: .3s; }
	.anim-delay-400 { animation-delay: .4s; }
	.anim-delay-500 { animation-delay: .5s; }
	/* Semantic button utilities */
    .btn-brand { display:inline-flex; align-items:center; gap:.5rem; font-weight:700; color:oklch(100% 0 0); background: var(--color-brand-accent-accessible); padding:.85rem 1.75rem; border-radius:9999px; box-shadow:0 4px 10px -2px rgba(0,0,0,.15); transition: background-color var(--motion-duration-fast) var(--motion-ease-standard), transform var(--motion-duration-medium) var(--motion-ease-emphasized), box-shadow var(--motion-duration-medium) var(--motion-ease-standard); }
	.btn-brand:hover { filter:brightness(.95); transform:translateY(-2px); }
	.dark .btn-brand:hover { filter:brightness(1.1); }
	.btn-brand:focus-visible { outline:2px solid var(--brand-accent); outline-offset:3px; }
    .badge-brand { background: var(--color-brand-accent-accessible); color:oklch(100% 0 0); border-radius:.75rem; padding:.375rem .875rem; font-weight:600; }
	.text-brand-icon { color: var(--color-brand-accent-accessible); }
	/* Motion reduction */
	@media (prefers-reduced-motion: reduce) {
		.animate-float-slow, .animate-float-fast, .animate-float-medium, .animate-lift { animation: none !important; }
	}
}

/* --- Semantic brand helpers --- */
@layer components {
	/* Primary brand button (new semantic helper; overrides earlier basic .btn-brand if present) */
	.btn-brand{
            display:inline-flex;align-items:center;justify-content:center;gap:.5rem;border-radius:9999px;padding:.9rem 1.5rem;font-weight:600;color:oklch(100% 0 0);box-shadow:0 2px 4px -1px rgba(0,0,0,.15);transition:background-color .25s var(--ease-swoop),box-shadow .25s var(--ease-swoop);background-color: var(--color-brand-accent);
	}
	.btn-brand:hover{ background-color: var(--color-brand-accent-accessible); }
	.btn-brand:focus-visible{ outline:none; box-shadow:0 0 0 2px var(--color-link-accent),0 0 0 4px color-mix(in srgb,var(--color-link-accent) 40%, transparent); }
	.btn-brand:disabled{ opacity:.5; cursor:not-allowed; }

	.badge-brand{
            display:inline-flex;align-items:center;border-radius:9999px;padding:.25rem .625rem;font-size:.75rem;line-height:1rem;font-weight:500;color:oklch(100% 0 0);background-color: var(--color-brand-accent-accessible);
	}
	.badge-brand-soft{
		display:inline-flex;align-items:center;border-radius:9999px;padding:.25rem .625rem;font-size:.75rem;line-height:1rem;font-weight:500;background-color: color-mix(in srgb, var(--color-link-accent) 12%, transparent);color: var(--color-brand-navy);border:1px solid color-mix(in srgb,var(--color-link-accent) 30%, transparent);
	}
}

@layer utilities {
	.link-brand{ color: var(--color-link-accent); }
	.link-brand:hover{ color: var(--color-link-accent-alt); }
	.ring-brand{ --tw-ring-color: var(--color-link-accent); }
	.bg-brand-soft{ background-color: color-mix(in srgb, var(--color-link-accent) 12%, transparent); }
	.border-brand{ border-color: var(--color-link-accent); }
	/* Keep existing .text-brand-icon but ensure variant points to accent */
	.text-brand-icon{ color: var(--color-link-accent); }
}

/* Typography plugin overrides */
@layer components {
	.prose-custom :where(p,ul,ol,blockquote,h1,h2,h3,h4,h5,h6){
		line-height:1.6;
	}
	.prose-custom h1,h2,h3,h4,h5,h6{font-weight:600;}
	.prose-custom{max-width:none;}
	.dark .prose-custom{color:var(--color-fg-base-dark);}
		.prose-custom a { color:var(--color-link-accent); text-decoration:none; }
		.dark .prose-custom a { color:var(--color-link-accent-alt); }
		.prose-custom a:hover { text-decoration:underline; }
}

/* Example nested component (PostCSS nesting) */
.card {
	border-radius: var(--radius-card);
	background-color: var(--color-bg-base);
	color: inherit;
	box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
	border: 1px solid var(--color-card-border);
	padding: var(--space-card);
	transition: background-color .3s var(--ease-swoop), border-color .3s var(--ease-swoop), box-shadow .3s var(--ease-swoop);
}
.dark .card { background-color:var(--color-bg-base-dark); border-color: var(--color-card-border-dark); }
.card h3 { font-size:1.125rem; line-height:1.75rem; font-weight:600; margin-bottom:0.5rem; }
.card p { font-size:.875rem; line-height:1.5rem; }
.card a { font-weight:500; }
.card.interactive:hover, .card.interactive:focus-within { box-shadow: var(--shadow-card-hover); }

/* Dark mode transition helper */
.dark-transition {
	transition: background-color .4s var(--ease-swoop), color .4s var(--ease-swoop), border-color .4s var(--ease-swoop);
}

/* Disable transitions during initial theme application to prevent flash */
.no-transition *, .no-transition *::before, .no-transition *::after { transition: none !important; }

/* Background fade utility for theme/system changes */
.bg-fade-theme { transition: background-color .6s var(--ease-swoop); }
@media (prefers-reduced-motion: reduce) {
	.bg-fade-theme { transition: none; }
	body * { transition-duration: 0ms !important; animation-duration: 0ms !important; animation-iteration-count: 1 !important; }
}

/* --- Additional semantic brand helpers (deduplicated) --- */
@layer utilities {
	.text-brand-icon-weak { color: color-mix(in srgb, var(--color-link-accent) 40%, white); }
	.bar-brand { background-color: color-mix(in srgb, var(--color-link-accent) 8%, transparent); border-color: color-mix(in srgb, var(--color-link-accent) 25%, transparent); }
        .bar-brand-strong { background-color: var(--color-brand-accent-accessible); color:oklch(100% 0 0); }
        .label-brand { background-color: color-mix(in srgb, var(--color-link-accent) 12%, transparent); color: color-mix(in srgb, var(--color-link-accent) 65%, black); border:1px solid color-mix(in srgb, var(--color-link-accent) 28%, transparent); }
        .label-brand-solid { background-color: var(--color-brand-accent-accessible); color:oklch(100% 0 0); }
	.progress-brand { background-color: var(--color-link-accent); }
	.bg-gradient-brand { background-image: linear-gradient(90deg, color-mix(in srgb, var(--color-link-accent) 85%, white), color-mix(in srgb, var(--color-brand-navy) 30%, var(--color-link-accent))); }
}
